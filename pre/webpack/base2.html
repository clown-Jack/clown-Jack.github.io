<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 的各种优化 | 快乐的小丑</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/static/image/logo.jpg">
    <script language="javascript" type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/js/MouseClickEffect.js"></script>
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.13f38f88.css" as="style"><link rel="preload" href="/assets/js/app.e32bf087.js" as="script"><link rel="preload" href="/assets/js/3.9f375187.js" as="script"><link rel="preload" href="/assets/js/1.2449ce55.js" as="script"><link rel="preload" href="/assets/js/11.3329ba97.js" as="script"><link rel="prefetch" href="/assets/js/10.e6e8b5c8.js"><link rel="prefetch" href="/assets/js/12.8136af58.js"><link rel="prefetch" href="/assets/js/13.9638c204.js"><link rel="prefetch" href="/assets/js/14.639d7759.js"><link rel="prefetch" href="/assets/js/15.d8b5b30f.js"><link rel="prefetch" href="/assets/js/16.33a12b57.js"><link rel="prefetch" href="/assets/js/17.ae80f00c.js"><link rel="prefetch" href="/assets/js/18.a7f37ba2.js"><link rel="prefetch" href="/assets/js/19.8c3caaba.js"><link rel="prefetch" href="/assets/js/20.1db8020a.js"><link rel="prefetch" href="/assets/js/21.1edf87ff.js"><link rel="prefetch" href="/assets/js/22.4671fc1e.js"><link rel="prefetch" href="/assets/js/23.7f76a2da.js"><link rel="prefetch" href="/assets/js/24.445097df.js"><link rel="prefetch" href="/assets/js/25.2911b283.js"><link rel="prefetch" href="/assets/js/26.b9865e07.js"><link rel="prefetch" href="/assets/js/27.fdde3f1e.js"><link rel="prefetch" href="/assets/js/28.b98c3fd4.js"><link rel="prefetch" href="/assets/js/29.f41ca7dd.js"><link rel="prefetch" href="/assets/js/30.2373d6c2.js"><link rel="prefetch" href="/assets/js/31.cc15243a.js"><link rel="prefetch" href="/assets/js/32.6db621fb.js"><link rel="prefetch" href="/assets/js/33.a1c63309.js"><link rel="prefetch" href="/assets/js/34.14823e3e.js"><link rel="prefetch" href="/assets/js/35.7bce5687.js"><link rel="prefetch" href="/assets/js/36.649d4a12.js"><link rel="prefetch" href="/assets/js/37.21fa3a10.js"><link rel="prefetch" href="/assets/js/38.e43efa50.js"><link rel="prefetch" href="/assets/js/39.6e630bb0.js"><link rel="prefetch" href="/assets/js/4.708f981d.js"><link rel="prefetch" href="/assets/js/40.86339c01.js"><link rel="prefetch" href="/assets/js/41.26c8593b.js"><link rel="prefetch" href="/assets/js/5.c6a7aaa6.js"><link rel="prefetch" href="/assets/js/6.47906c7a.js"><link rel="prefetch" href="/assets/js/7.f855d5d5.js"><link rel="prefetch" href="/assets/js/8.d3caa70c.js"><link rel="prefetch" href="/assets/js/9.3d3706c8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.13f38f88.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-dad8a512><div data-v-dad8a512><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-dad8a512 data-v-dad8a512><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-dad8a512 data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>快乐的小丑</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>小丑</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-dad8a512><header class="navbar" data-v-dad8a512><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">快乐的小丑</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/clown-Jack/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-dad8a512></div> <aside class="sidebar" data-v-dad8a512><div class="personal-info-wrapper" data-v-ca798c94 data-v-dad8a512><img src="/avator.jpg" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    小丑
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>19</h3> <h6 data-v-ca798c94>文章</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>10</h3> <h6 data-v-ca798c94>标签</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/clown-Jack/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>webpack 的各种优化</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>小丑</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-dad8a512><main class="page"><div class="page-title" style="display:none;"><h1>webpack 的各种优化</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>小丑</span></i> <i class="iconfont reco-date" data-v-3b7f5bdf><span data-v-3b7f5bdf>2020-09-03</span></i> <i class="iconfont reco-eye" data-v-3b7f5bdf><span id="/pre/webpack/base2.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-3b7f5bdf><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-3b7f5bdf><span class="tag-item" data-v-3b7f5bdf>webpack</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="webpack-的各种优化"><a href="#webpack-的各种优化" class="header-anchor">#</a> webpack 的各种优化</h1> <p>主要是 1.打包大小 2.打包速度 3.模块拆分</p> <h2 id="首先准备工作"><a href="#首先准备工作" class="header-anchor">#</a> 首先准备工作</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm init -y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>接着会生成了一个 package.json 文件</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;name&quot;: &quot;webpack-base2&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li><p>安装插件</p> <p>1.webpack 负责打包</p> <p>2.webpack-cli 负责解析 config 命令</p> <p>3.webpack-dev-server 负责起本地服务</p> <p>4.html-webpack-plugin 负责打包 html</p> <p>5.css-loader 负责加载 css</p> <p>6.style-loader 负责转化为 style 用于将打包后的 css 代码<code>&lt;style&gt;</code>标签形式添加到页面头部</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;style&gt;
 div{
     width:100%
 }
&lt;/style&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>7.mini-css-extract-plugin 负责抽离 css</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/* 这是提取css的文件，main.css */
  .index-wrapper-qpZko {
      width: 220px;
      height: 50px;
  }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;!-- 这是通过‘html-webpack-plugin’生成的html，会自动加入提取出来的公共css文件 --&gt;
&lt;link href=&quot;../main.css?9310f73f2ea21a1d0717&quot; rel=&quot;stylesheet&quot;&gt;&lt;/head&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>8.babel-loader 负责转化 js</p> <p>9.@babel/core 转化 js 需要的核心包</p> <p>10.@babel/preset-env 负责 es6 转化成 es5</p> <p>11.@babel/preset-react 负责转化 react</p> <p>12.file-loader 图片不想转化成 base64</p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i webpack webpack-cli webpack-dev-server html-webpack-plugin css-loader style-loader
mini-css-extract-plugin babel-loader @babel/core @babel/preset-env @babel/preset-react
file-loader  --save-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>安装成功之后 <code>devDependencies表示开发环境 dependencies表示生产环境</code></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;name&quot;: &quot;webpack-base2&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;@babel/core&quot;: &quot;^7.9.6&quot;,
    &quot;@babel/preset-env&quot;: &quot;^7.9.6&quot;,
    &quot;@babel/preset-react&quot;: &quot;^7.9.4&quot;,
    &quot;babel-loader&quot;: &quot;^8.1.0&quot;,
    &quot;css-loader&quot;: &quot;^3.5.3&quot;,
    &quot;file-loader&quot;: &quot;^6.0.0&quot;,
    &quot;html-webpack-plugin&quot;: &quot;^4.3.0&quot;,
    &quot;mini-css-extract-plugin&quot;: &quot;^0.9.0&quot;,
    &quot;style-loader&quot;: &quot;^1.2.1&quot;,
    &quot;webpack&quot;: &quot;^4.43.0&quot;,
    &quot;webpack-cli&quot;: &quot;^3.3.11&quot;,
    &quot;webpack-dev-server&quot;: &quot;^3.11.0&quot;
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ul><li>配置启动命令</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;scripts&quot;: {
    &quot;dev&quot;: &quot;webpack-dev-server --env=development&quot;,
    &quot;dev:build&quot;:&quot;webpack --env=development&quot;,
    &quot;build&quot;:&quot;webpack --env=production&quot;
  },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>当前目录下新建 <code>webpack.config.js</code> 默认会执行这个文件<div class="custom-block danger"><p>😡 rules 里的 test 千万不要加&quot;&quot;,巨坑</p></div></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>const path = require(&quot;path&quot;);
const MiniCssExtractPlugin = require('mini-css-extract-plugin');
const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;)
module.exports = (env) =&gt; {
    return {
        mode: env,
        entry: &quot;./src/index.js&quot;,
        output: {
            filename: &quot;bundle.js&quot;,  //同步打包的名字
            path: path.resolve(__dirname, 'dist')  //出口必须是绝对路径
        },
        module: {
            rules: [
                {
                    test: /\.js|jsx$/,
                    exclude: /node_modules/,
                    use: {  //.babelrc
                        loader: &quot;babel-loader&quot;,
                        options: {
                            presets: [
                                &quot;@babel/preset-env&quot;,
                                &quot;@babel/preset-react&quot;
                            ]
                        }
                    }
                },
                {
                    test: /\.(jpe?)g|png|gif$/,
                    use: &quot;file-loader&quot;
                },
                {
                    test: /\.css$/,
                    use: [
                        env !== 'development' ? MiniCssExtractPlugin.loader :'style-loader', 'css-loader'
                    ]
                }
            ]
        },
        plugins: [
            env !== 'development' &amp;&amp; new MiniCssExtractPlugin(),
            new HtmlWebpackPlugin({
                template: &quot;./src/index.html&quot;,
                filename: &quot;index.html&quot;
            })
        ].filter(Boolean)
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="_1-删除无用的-css"><a href="#_1-删除无用的-css" class="header-anchor">#</a> 1.删除无用的 css</h2> <p>在项目中经常有一些没有用的 css,这个时候我们最好在生产环境去掉这个没有用的 css</p> <ul><li>打包前 index.css</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>body{
    background: red;
}
.div{
    color: blue;
}
.tag1{
    color: blue;
}
.tag2{
    color: blue;
}
.tag3{
    color: blue;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>上面的这个些没有用的会被打包到项目中，这个时候我们需要安装两个插件</p> <p>1.glob 有搜索文件功能</p> <p>2.purgecss-webpack-plugin</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i purgecss-webpack-plugin glob
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>{nodir:true})</code> 不包括目录</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const glob = require(&quot;glob&quot;);  //主要功能是负责查找匹配的文件
let paths = glob.sync('./src/**.*',{nodir:true});
console.log(paths)
==========================================================
[ './src/index.css', './src/index.html', './src/index.js' ]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>webpack.config.js 中配置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const glob = require(&quot;glob&quot;);  //主要功能是负责查找匹配的文件
//主要作用是删除无意义的css  只能配合mini-css-extract-plugin
const PurgeCssWebpackPlugin = require(&quot;purgecss-webpack-plugin&quot;);

plugin:[
  new PurgeCssWebpackPlugin({
      paths:glob.sync('./src/**.*',{nodir:true})   //**表示n个目录  *表示任意文件
  })
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>打包之后</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>body{
    background: red;
}
.div{
    color: blue;
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>参考地址:<a href="https://purgecss.com/plugins/webpack.html#usage" target="_blank" rel="noopener noreferrer">https://purgecss.com/plugins/webpack.html#usage<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_2-降低图片的分辨率"><a href="#_2-降低图片的分辨率" class="header-anchor">#</a> 2.降低图片的分辨率</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i image-webpack-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block danger"><p>安装这个插件的时候遇到的坑</p></div> <div class="language- line-numbers-mode"><pre class="language-text"><code>- 如果安装报错先卸载yarn remove image-webpack-loader   // npm uninstall image-webpack-loader
- 使用cnpm装 npm install cnpm -g --registry=https://registry.npm.taobao.org
- cnpm i image-webpack-loader --save-dev
- 如果先前尝试使用 yarn 或 npm 安装过，一定要先卸载掉用 cnpm 安装
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code> {
        test: /\.(jpe?)g|png|gif$/,
        use: [
            {
                loader:&quot;file-loader&quot;
            },{
                //可以在使用file-loader之前 对图片进行压缩
                loader:&quot;image-webpack-loader&quot;,
                options: {
                    mozjpeg: {
                      progressive: true,
                      quality: 65
                    },
                    // optipng.enabled: false will disable optipng
                    optipng: {
                      enabled: false,
                    },
                    pngquant: {
                      quality: [0.65, 0.90],
                      speed: 4
                    },
                    gifsicle: {
                      interlaced: false,
                    },
                    // the webp option will enable WEBP
                    webp: {
                      quality: 75
                    }
                  }
            }
        ]
    },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>参考地址:<a href="https://www.npmjs.com/package/image-webpack-loader" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/image-webpack-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_3-cdn-加载文件"><a href="#_3-cdn-加载文件" class="header-anchor">#</a> 3.CDN 加载文件</h2> <blockquote><p>常用 cdn 地址 <a href="https://www.bootcdn.cn/" target="_blank" rel="noopener noreferrer">https://www.bootcdn.cn/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>在我们平时开发过程中都使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&quot;jquery&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>但是打包出来的文件会很大</p> <p>我们可以使用 CDN 的方式直接在页面里全局引入</p> <div class="language-html line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>321321<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>但是这个时候我们在 js 里取值不知道这个$符号哪里来的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>打包后的结果
<img src="/assets/img/webpack1.159c60b0.png" alt="webpack1"></p> <p>这个时候可以使用 webpack 利用的方法<code>externals外部依赖</code>减少打包时间和打包后的文件大小</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'jquery'</span><span class="token operator">:</span> <span class="token string">&quot;$&quot;</span> <span class="token comment">//不去打包代码中的jquery</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>打包后的结果</p> <p><img src="/assets/img/webpack2.f0deb71b.png" alt="webpack2"></p> <p>但是如果有很多 CDN 的话，这么做也不可取，这么做也会卡</p> <p>这个时候我们需要一个插件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i add-asset-html-cdn-webpack-plugin -S
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>参考地址:<a href="https://www.npmjs.com/package/add-asset-html-cdn-webpack-plugin" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/add-asset-html-cdn-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_4-tree-shaking-scope-hoisting"><a href="#_4-tree-shaking-scope-hoisting" class="header-anchor">#</a> 4.Tree-shaking&amp;&amp;Scope-Hoisting</h2> <p>这两个模块都是 webpack 内置的</p> <h3 id="_4-1-tree-shaking"><a href="#_4-1-tree-shaking" class="header-anchor">#</a> 4.1 Tree-shaking</h3> <p>顾名思义就是将没用的内容摇晃下来，来看下面代码(去掉没用的模块,默认只支持 es6 模块) <code>只能在生产环境使用</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>es6模块导入是静态导入不能
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;XXX&quot;</span>
<span class="token punctuation">}</span>

commonjs是动态导入，它可以
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;XXXXX&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//calc.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">minus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> <span class="token string">&quot;minus&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> minus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./calc&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">minus</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack.config.js</span>
 optimization<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//优化项</span>
        usedExports<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//使用了哪个模块你和我说一下</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>副作用代码 webpack 会打包进去</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//test.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> test<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//index.js</span>
<span class="token keyword">import</span> test <span class="token keyword">from</span> <span class="token string">&quot;./test&quot;</span><span class="token punctuation">;</span> <span class="token comment">//副作用的代码 可能开发时是无意义的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">//移除副作用  默认应该是true</span>
  <span class="token comment">//引入的变量没有使用就删除</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>但是这个 sideEffects 有缺点</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import './index.css'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>它会把这个 css 也干掉 这个时候我们可以使用<code>require(&quot;./inde.css&quot;)</code>但是不推荐太丑</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//package.json</span>
<span class="token comment">//引入的css文件需要增加它不是副作用 否则会被tree-shaking掉</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;**/*.css&quot;</span> <span class="token comment">//glod 语法</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_4-2-scope-hoisting"><a href="#_4-2-scope-hoisting" class="header-anchor">#</a> 4.2 Scope-Hoisting</h3> <p>这个模块的作用是减少作用域, 每个模块都是一个函数,函数多了会导致内存过大,<code>只在生产环境使用</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//calc.js</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> d<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//index.js</span>
<span class="token keyword">import</span> d <span class="token keyword">from</span> <span class="token string">&quot;./calc&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>打包后的结果
<img src="/assets/img/webpack3.fb8e23e8.png" alt="webpack3"></p> <h2 id="_5-dllplugin-dllreferenceplugin"><a href="#_5-dllplugin-dllreferenceplugin" class="header-anchor">#</a> 5.DllPlugin &amp;&amp; DllReferencePlugin</h2> <ul><li>DllPlugin 叫动态链接库
每次构建时第三方模块都需要重新构建,这个性能消耗比较大，我们可以先把第三方库打包成动态链接库，以后构建时只需要查找构建好的库就好了，这样可以大大节约构建时间</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">;</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span> hello <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="data:image/png;base64,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" alt="webpack4"></p> <ul><li>怎么打包第三方库</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//package.json</span>
 <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;dll&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.dll.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack.dll.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token comment">//打包后接收自执行函数的名字</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&quot;commonjs2&quot;</span><span class="token punctuation">,</span> <span class="token comment">//默认用var模式  常用的commonjs  commonjs2 umd</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;react.dll.js&quot;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//目前是为了把calc打包成node可以使用的模块</span>
 libraryTarget<span class="token operator">:</span> <span class="token string">&quot;commonjs2&quot;</span><span class="token punctuation">,</span> <span class="token comment">//默认用var模式  常用的commonjs  commonjs2 umd</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>dll 可以使用在生产环境 一般会用到开发环境</li></ul> <h3 id="_5-1-dllplugin"><a href="#_5-1-dllplugin" class="header-anchor">#</a> 5.1 DllPlugin</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack.dll.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> DLLPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>DllPlugin<span class="token punctuation">;</span>
<span class="token comment">//需要产生一个缓存列表</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token comment">//打包后接收自执行函数的名字</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&quot;var&quot;</span><span class="token punctuation">,</span> <span class="token comment">//默认用var模式  常用的commonjs  commonjs2 umd</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;react.dll.js&quot;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">DLLPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll/manifest.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">//我本地使用了import react语法需要去manifest.json查找，找到后会加载对应的库的名字 可能会引用某个模块 这个时候会去dll.js文件中查找</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_5-2-dllreferenceplugin"><a href="#_5-2-dllreferenceplugin" class="header-anchor">#</a> 5.2 DllReferencePlugin</h3> <p>DllReferencePlugin 这个是动态链接映射，什么意思呢?就是说 DllPlugin 会打包生成一个 manifest.json 文件和 reat.dll.js 文件,我们调用 react 的时候，默认会找 manifest.json</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack.config.js</span>
<span class="token keyword">const</span> DLLReferencePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>DllReferencePlugin<span class="token punctuation">;</span>
plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    manifest<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll/manifest.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>这个时候肯定会有人问，为什么 dll 文件要单独创建一个呢，不放到 dist 文件夹下呢？
因为在我们打包的时候会配置 cleanwebpackplugin 会清空 dist,得不偿失</li></ul> <p>但是当前这个 react.dll.js 在文件没有引用，所以还是找不到，怎么解决这个问题呢，引用了一个第三方插件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i add-asset-html-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack.config.js</span>
<span class="token keyword">const</span> AddAssetHtmlPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;add-asset-html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">AddAssetHtmlPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    filepath<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dll/react.dll.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>参考地址:<a href="https://www.npmjs.com/package/add-asset-html-webpack-plugin" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/add-asset-html-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_6-动态加载"><a href="#_6-动态加载" class="header-anchor">#</a> 6.动态加载</h2> <ul><li>实现点击动态加载文件</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//动态加载文件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./calc&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

button<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;点我&quot;</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>

button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>现在是我们一加载页面的时候就会加载 calc,我们希望不点击 button 不加载，只有点的时候加载</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

button<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;点我&quot;</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>

button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//动态导入 类比 路由的懒加载  import语法</span>

    <span class="token comment">//webpack会默认把import的内容单独打包成一个文件，在你使用的时候会使用jsonp去加载这个文件</span>
    <span class="token comment">//import()返回一个promise</span>
    <span class="token comment">//import()可以实现代码分割</span>
    <span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">&quot;./calc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//结果</span>
<span class="token number">3</span>add
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token comment">//webpack.config.js</span>
 output<span class="token operator">:</span> <span class="token punctuation">{</span>
            filename<span class="token operator">:</span> <span class="token string">&quot;bundle.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">//同步打包的名字</span>
            chunkFilename<span class="token operator">:</span> <span class="token string">'[name].min.js'</span><span class="token punctuation">,</span> <span class="token comment">// 异步打包的名字</span>
            path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>也可以通过下面这样指定文件名字 <code>/*webpackChunkName:'video'*/</code>这个不是<code>注释</code></p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">let</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

button<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;点我&quot;</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>

button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//动态导入 类比 路由的懒加载  import语法</span>

  <span class="token comment">//webpack会默认把import的内容单独打包成一个文件，在你使用的时候会使用jsonp去加载这个文件</span>
  <span class="token comment">//import()返回一个promise</span>
  <span class="token comment">//import()可以实现代码分割</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/*webpackChunkName:'video'*/</span> <span class="token string">&quot;./calc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_7-打包文件分析工具"><a href="#_7-打包文件分析工具" class="header-anchor">#</a> 7.打包文件分析工具</h2> <p>安装<code>webpack-bundle-analyzer</code>插件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i webpack-bundle-analyzer -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> BundleAnalyzerPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-bundle-analyzer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
plugins<span class="token operator">:</span><span class="token punctuation">[</span>
  env <span class="token operator">!==</span> <span class="token string">&quot;development&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>比如有如下场景：
a.js里需要引入jquery
b.js里需要引入jquery
如果直接打包的话,jquery会被打包两次，这个时候需要优化，把jquery抽离出来,
a.js用完jquery之后，放到缓存里，b.js用的时候直接从缓存里取</p> <p>抽离第三方模块</p> <ul><li>第三方模块不要和业务逻辑放在一起</li> <li>增加缓存 304</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//在生产环境下，将第三方模块进行抽离</span>
    optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
      splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">//inital 只操作同步的  import $ from 'jquery'</span>
        <span class="token comment">//all 所有的 async异步的</span>
        chunks<span class="token operator">:</span> <span class="token string">&quot;async&quot;</span><span class="token punctuation">,</span> <span class="token comment">//默认支持异步代码分割 import()</span>
        minSize<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token comment">//文件超过30k，我就会抽离他</span>
        minRemainingSize<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        maxSize<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//最少模块引用一次才抽离</span>
        maxAsyncRequests<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token comment">//最多6个请求</span>
        maxInitialRequests<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">//最多4个首页加载</span>
        automaticNameDelimiter<span class="token operator">:</span> <span class="token string">&quot;~&quot;</span><span class="token punctuation">,</span><span class="token comment">//打包后名字xxx~a</span>
          <span class="token comment">//缓存组</span>
        cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
          react<span class="token operator">:</span><span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/[\\/]node_modules[\\/](react)|(react-dom)/</span><span class="token punctuation">,</span>
            priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          defaultVendors<span class="token operator">:</span> <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
            priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token number">1</span>
            <span class="token comment">//优先级高</span>
            minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
            reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>参考链接:<a href="https://webpack.js.org/plugins/split-chunks-plugin/" target="_blank" rel="noopener noreferrer">https://webpack.js.org/plugins/split-chunks-plugin/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="custom-block danger"><p>dllplugin不要和splitchunks共同使用</p></div> <h2 id="_8-多入口文件打包"><a href="#_8-多入口文件打包" class="header-anchor">#</a> 8.多入口文件打包</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//entry有三种写法 字符串 数组  对象</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
      a<span class="token operator">:</span> <span class="token string">&quot;./src/a.js&quot;</span><span class="token punctuation">,</span>
      b<span class="token operator">:</span> <span class="token string">&quot;./src/b.js&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code> output<span class="token operator">:</span> <span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//出口必须是绝对路径</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>   plugins<span class="token operator">:</span><span class="token punctuation">[</span>
       <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        template<span class="token operator">:</span> <span class="token string">&quot;./src/index.html&quot;</span><span class="token punctuation">,</span>
        filename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
        chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//代码块</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        template<span class="token operator">:</span> <span class="token string">&quot;./src/index.html&quot;</span><span class="token punctuation">,</span>
        filename<span class="token operator">:</span> <span class="token string">&quot;login.html&quot;</span><span class="token punctuation">,</span>
        chunksSortMode<span class="token operator">:</span> <span class="token string">&quot;manual&quot;</span><span class="token punctuation">,</span> <span class="token comment">//排序模式：手动的  </span>
        chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//代码块  打包的顺序按照我自己的排列</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_9-费时分析"><a href="#_9-费时分析" class="header-anchor">#</a> 9.费时分析</h2> <p>可以计算每一步执行的运行速度</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install --save-dev speed-measure-webpack-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> SpeedMeasureWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;speed-measure-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> smp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpeedMeasureWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
smp<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  entry<span class="token operator">:</span><span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//把需要计算速度的模块包住就可以</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_10-noparse"><a href="#_10-noparse" class="header-anchor">#</a> 10.noParse</h2> <p>module.noParse 对于类似jquery这类依赖库,内部不会引用其他库，我们再打包的时候就没有必要去解析，这样能够增加打包速度</p></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">2020/9/3 下午10:56:40</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-ribbon"></canvas><canvas id="vuepress-canvas-cursor"></canvas><div></div><!----><div class="reco-bgm-panel" data-v-39f9e6e0><audio id="bgm" src="https://cdn.jsdelivr.net/gh/fudalijunyi/cdn/MP3/年轮.mp3" data-v-39f9e6e0></audio> <div class="reco-float-box" style="bottom:10px;z-index:999999;display:none;" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><img src="https://cdn.jsdelivr.net/gh/fudalijunyi/picture-bed/img/20200715154924.png" data-v-39f9e6e0></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><div class="reco-bgm-cover" style="background-image:url(https://cdn.jsdelivr.net/gh/fudalijunyi/picture-bed/img/20200715154924.png);" data-v-39f9e6e0><div class="mini-operation" style="display:none;" data-v-39f9e6e0><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-39f9e6e0></i></div> <div class="falut-message" style="display:none;" data-v-39f9e6e0>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><div class="info-box" data-v-39f9e6e0><i class="reco-bgm reco-bgm-music music" data-v-39f9e6e0></i>年轮</div> <div class="info-box" data-v-39f9e6e0><i class="reco-bgm reco-bgm-artist" data-v-39f9e6e0></i>张碧晨</div> <div class="reco-bgm-progress" data-v-39f9e6e0><div class="progress-bar" data-v-39f9e6e0><div class="bar" data-v-39f9e6e0></div></div></div> <div class="reco-bgm-operation" data-v-39f9e6e0><i class="reco-bgm reco-bgm-last last" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-play play" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-next next" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-39f9e6e0></i> <div class="volume-bar" data-v-39f9e6e0><div class="bar" data-v-39f9e6e0></div></div></div></div> <div class="reco-bgm-left-box" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><i class="reco-bgm reco-bgm-left" data-v-39f9e6e0></i></div></div></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="z-index:999999;right:68px;bottom:190px;display:none;" data-v-5775ee02>
      我是lookroot欢迎你的关注 
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="240" height="352" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div></div></div>
    <script src="/assets/js/app.e32bf087.js" defer></script><script src="/assets/js/3.9f375187.js" defer></script><script src="/assets/js/1.2449ce55.js" defer></script><script src="/assets/js/11.3329ba97.js" defer></script>
  </body>
</html>
